create function tcu.fn_FormatPhone
(	@phone	varchar(10)	)
returns varchar(12)
as
/*
????????????????????????????????????????????????????????????????????????????????
			c 2000-08 ? Texans Credit Union ? All rights reserved.
????????????????????????????????????????????????????????????????????????????????
Developer:	Paul Hunter
Created  :	06/16/2008
Purpose  :	Formats an unformatted string like a phone number ###.###.####.
History  :
  Date		Developer		Description
??????????	??????????????	????????????????????????????????????????????????????
????????????????????????????????????????????????????????????????????????????????
*/
begin
	declare @sPhone varchar(10)
	set @sPhone = right(space(10) + isnull(rtrim(cast(@phone as varchar)), ''), 10)
	return	case rtrim(@sPhone)
			when '' then ''
			else  left(@sPhone, 3)			+ '.'
				+ substring(@sPhone, 4, 3)	+ '.'
				+ right(@sPhone, 4)
			end
end
GO
