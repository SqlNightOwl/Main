create function tcu.fn_XmlEncode
(	@value varchar(max)	)
returns	varchar(max)
as
/*
????????????????????????????????????????????????????????????????????????????????
			c 2000-08 ? Texans Credit Union ? All rights reserved.
????????????????????????????????????????????????????????????????????????????????
Developer:	Paul Hunter
Created  :	06/24/2008
Purpose  :	Encodes the string so it's save for XML data.
History  :
  Date		Developer		Description
??????????	??????????????	????????????????????????????????????????????????????
????????????????????????????????????????????????????????????????????????????????
*/
begin
	if len(isnull(@value, '')) > 0
	begin
		--	do the ampersand first as the encoded values include an ampersand
		set	@value	= replace(@value, '&'	, '&amp;')
		set	@value	= replace(@value, '>'	, '&gt;')
		set	@value	= replace(@value, '<'	, '&lt;')
		set	@value	= replace(@value, '"'	, '&quot;')
		set	@value	= replace(@value, ''''	, '&apos;')
	end
	return @value
end
GO
