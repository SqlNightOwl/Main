create function tcu.fn_ProcessNotificationList
(	@processId		smallint
,	@messageType	tinyint	)
returns varchar(500)
as
/*
????????????????????????????????????????????????????????????????????????????????
			c 2000-08 ? Texans Credit Union ? All rights reserved.
????????????????????????????????????????????????????????????????????????????????
Developer:	Paul Hunter
Created  :	11/03/2007
Purpose  :	Returns a semi-colon delimited list of Process Notification Recipients
			for the specified ProcessId and MessageType.
History  :
   Date		Developer		Description
??????????	??????????????	????????????????????????????????????????????????????
????????????????????????????????????????????????????????????????????????????????
*/
begin
	declare @return varchar(500)
	select	@return = isnull(@return, '') + Recipient + ';'
	from	tcu.ProcessNotification
	where	@processId				= ProcessId
	and		power(2, @messageType)	= (MessageTypes & power(2, @messageType))
	return	@return
end
GO
